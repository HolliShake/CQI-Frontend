{"remainingRequest":"/home/andydevs69420/Documents/DTO/CQIFrontend/node_modules/babel-loader/lib/index.js!/home/andydevs69420/Documents/DTO/CQIFrontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/andydevs69420/Documents/DTO/CQIFrontend/src/helpers/authservice/user.service.js","dependencies":[{"path":"/home/andydevs69420/Documents/DTO/CQIFrontend/src/helpers/authservice/user.service.js","mtime":1678071475849},{"path":"/home/andydevs69420/Documents/DTO/CQIFrontend/node_modules/cache-loader/dist/cjs.js","mtime":1678066322946},{"path":"/home/andydevs69420/Documents/DTO/CQIFrontend/node_modules/babel-loader/lib/index.js","mtime":1678066323882},{"path":"/home/andydevs69420/Documents/DTO/CQIFrontend/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1678066323126}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IGF1dGhIZWFkZXIgfSBmcm9tICcuL2F1dGgtaGVhZGVyJzsKZXhwb3J0IHZhciB1c2VyU2VydmljZSA9IHsKICBsb2dpbjogbG9naW4sCiAgbG9nb3V0OiBsb2dvdXQsCiAgcmVnaXN0ZXI6IHJlZ2lzdGVyLAogIGdldEFsbDogZ2V0QWxsCn07CgpmdW5jdGlvbiBsb2dpbihlbWFpbCwgcGFzc3dvcmQpIHsKICByZXR1cm4gYXhpb3MucG9zdCgiL2FwaS9BdXRoL0xvZ2luIiwgewogICAgZW1haWw6IGVtYWlsLAogICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgfSkudGhlbihoYW5kbGVSZXNwb25zZSkudGhlbihmdW5jdGlvbiAodXNlcikgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgIGNvbnNvbGUubG9nKGVtYWlsLCBwYXNzd29yZCk7IC8vIGxvZ2luIHN1Y2Nlc3NmdWwgaWYgdGhlcmUncyBhIGp3dCB0b2tlbiBpbiB0aGUgcmVzcG9uc2UKCiAgICBpZiAodXNlci5BY2Nlc3NUb2tlbikgewogICAgICAvLyBzdG9yZSB1c2VyIGRldGFpbHMgYW5kIGp3dCB0b2tlbiBpbiBsb2NhbCBzdG9yYWdlIHRvIGtlZXAgdXNlciBsb2dnZWQgaW4gYmV0d2VlbiBwYWdlIHJlZnJlc2hlcwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcicsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgIH0KCiAgICByZXR1cm4gdXNlcjsKICB9KTsKfQoKZnVuY3Rpb24gbG9nb3V0KCkgewogIC8vIHJlbW92ZSB1c2VyIGZyb20gbG9jYWwgc3RvcmFnZSB0byBsb2cgdXNlciBvdXQKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndXNlcicpOwp9CgpmdW5jdGlvbiByZWdpc3Rlcih1c2VyKSB7CiAgdmFyIHJlcXVlc3RPcHRpb25zID0gewogICAgbWV0aG9kOiAnUE9TVCcsCiAgICBoZWFkZXJzOiB7CiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgIH0sCiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh1c2VyKQogIH07CiAgcmV0dXJuIGZldGNoKCIvdXNlcnMvcmVnaXN0ZXIiLCByZXF1ZXN0T3B0aW9ucykudGhlbihoYW5kbGVSZXNwb25zZSk7Cn0KCmZ1bmN0aW9uIGdldEFsbCgpIHsKICB2YXIgcmVxdWVzdE9wdGlvbnMgPSB7CiAgICBtZXRob2Q6ICdHRVQnLAogICAgaGVhZGVyczogYXV0aEhlYWRlcigpCiAgfTsKICByZXR1cm4gZmV0Y2goIi91c2VycyIsIHJlcXVlc3RPcHRpb25zKS50aGVuKGhhbmRsZVJlc3BvbnNlKTsKfQoKZnVuY3Rpb24gaGFuZGxlUmVzcG9uc2UocmVzcG9uc2UpIHsKICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogIGlmIChyZXNwb25zZS5zdGF0dXNUZXh0ICE9ICJPSyIpIHsKICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAvLyBhdXRvIGxvZ291dCBpZiA0MDEgcmVzcG9uc2UgcmV0dXJuZWQgZnJvbSBhcGkKICAgICAgbG9nb3V0KCk7CiAgICAgIGxvY2F0aW9uLnJlbG9hZCh0cnVlKTsKICAgIH0KCiAgICB2YXIgZXJyb3IgPSBkYXRhICYmIGRhdGEubWVzc2FnZSB8fCByZXNwb25zZS5zdGF0dXNUZXh0OwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9CgogIHJldHVybiBQcm9taXNlLnJlc29sdmUoZGF0YSk7Cn0="},{"version":3,"sources":["/home/andydevs69420/Documents/DTO/CQIFrontend/src/helpers/authservice/user.service.js"],"names":["axios","authHeader","userService","login","logout","register","getAll","email","password","post","then","handleResponse","user","console","log","AccessToken","localStorage","setItem","JSON","stringify","removeItem","requestOptions","method","headers","body","fetch","response","data","statusText","status","location","reload","error","message","Promise","reject","resolve"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,eAA3B;AAEA,OAAO,IAAMC,WAAW,GAAG;AACvBC,EAAAA,KAAK,EAALA,KADuB;AAEvBC,EAAAA,MAAM,EAANA,MAFuB;AAGvBC,EAAAA,QAAQ,EAARA,QAHuB;AAIvBC,EAAAA,MAAM,EAANA;AAJuB,CAApB;;AAOP,SAASH,KAAT,CAAeI,KAAf,EAAsBC,QAAtB,EAAgC;AAC5B,SAAOR,KAAK,CAACS,IAAN,CAAW,iBAAX,EAA8B;AACjCF,IAAAA,KAAK,EAAEA,KAD0B;AAEjCC,IAAAA,QAAQ,EAAEA;AAFuB,GAA9B,EAINE,IAJM,CAIDC,cAJC,EAKND,IALM,CAKD,UAAAE,IAAI,EAAI;AACV;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,KAAZ,EAAmBC,QAAnB,EAFU,CAIV;;AACA,QAAII,IAAI,CAACG,WAAT,EAAsB;AAClB;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeP,IAAf,CAA7B;AACH;;AACD,WAAOA,IAAP;AACH,GAfM,CAAP;AAgBH;;AAED,SAASR,MAAT,GAAkB;AACd;AACAY,EAAAA,YAAY,CAACI,UAAb,CAAwB,MAAxB;AACH;;AAED,SAASf,QAAT,CAAkBO,IAAlB,EAAwB;AACpB,MAAMS,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEN,IAAI,CAACC,SAAL,CAAeP,IAAf;AAHa,GAAvB;AAKA,SAAOa,KAAK,oBAAoBJ,cAApB,CAAL,CAAyCX,IAAzC,CAA8CC,cAA9C,CAAP;AACH;;AAED,SAASL,MAAT,GAAkB;AACd,MAAMe,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,KADW;AAEnBC,IAAAA,OAAO,EAAEtB,UAAU;AAFA,GAAvB;AAIA,SAAOwB,KAAK,WAAWJ,cAAX,CAAL,CAAgCX,IAAhC,CAAqCC,cAArC,CAAP;AACH;;AAED,SAASA,cAAT,CAAwBe,QAAxB,EAAkC;AAC9B,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;;AAEA,MAAID,QAAQ,CAACE,UAAT,IAAuB,IAA3B,EAAiC;AAC7B,QAAIF,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AACzB;AACAzB,MAAAA,MAAM;AACN0B,MAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AACH;;AACD,QAAMC,KAAK,GAAIL,IAAI,IAAIA,IAAI,CAACM,OAAd,IAA0BP,QAAQ,CAACE,UAAjD;AACA,WAAOM,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH;;AACD,SAAOE,OAAO,CAACE,OAAR,CAAgBT,IAAhB,CAAP;AACH","sourcesContent":["import axios from 'axios';\r\nimport { authHeader } from './auth-header';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n};\r\n\r\nfunction login(email, password) {\r\n    return axios.post(\"/api/Auth/Login\", {\r\n        email: email,\r\n        password: password  \r\n    })\r\n    .then(handleResponse)\r\n    .then(user => {\r\n        // eslint-disable-next-line no-console\r\n        console.log(email, password);\r\n\r\n        // login successful if there's a jwt token in the response\r\n        if (user.AccessToken) {\r\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n        }\r\n        return user;\r\n    });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n    return fetch(`/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n    return fetch(`/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    const data = response.data;\r\n\r\n    if (response.statusText != \"OK\") {\r\n        if (response.status === 401) {\r\n            // auto logout if 401 response returned from api\r\n            logout();\r\n            location.reload(true);\r\n        }\r\n        const error = (data && data.message) || response.statusText;\r\n        return Promise.reject(error);\r\n    }\r\n    return Promise.resolve(data);\r\n}\r\n"]}]}